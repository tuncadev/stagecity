(function (c) {
  "use strict";
  c(document).ready(function () {
    var _ = civi_template_vars.ajax_url,
      u = civi_template_vars.apply_saved,
      a = civi_template_vars.not_file,
      e = c(".form-popup-apply");
    e.each(function () {
      var a = c("#" + c(".btn-submit-apply-jobs").attr("id"));
      var r = c(".civi-button-apply." + c(this).attr("id"));
      var o = c("#" + c(this).attr("id"));
      a.on("click", function (a) {
        a.preventDefault();
        var e = c(this),
          t = o.find('input[name="apply_emaill"]').val(),
          i = o.find('textarea[name="apply_message"]').val(),
          n = o.find('input[name="apply_phone"]').val(),
          s = r.data("candidate_id"),
          d = r.data("jobs_id"),
          p = o.find('input[name="jobs_cv_url"]').val(),
          l = o.find('input[name="type_apply"]').val();
        c.ajax({
          type: "POST",
          url: _,
          dataType: "json",
          data: {
            action: "jobs_add_to_apply",
            jobs_id: d,
            candidate_id: s,
            emaill: t,
            phone: n,
            message: i,
            cv_url: p,
            type_apply: l,
          },
          beforeSend: function () {
            e.find(".btn-loading").fadeIn();
          },
          success: function (a) {
            if (a.success == true) {
              o.find(".message_error").addClass("true");
              o.find(".message_error").text(a.message);
              c(".civi-button-apply[data-jobs_id =" + d + "]").html(u);
              $("#apply_success").css("display", "block");
				runCountDown();
            } else {
              c(".message_error").text(a.message);
            }
            e.find(".btn-loading").fadeOut();
          },
        });
      });
    });
  });
})(jQuery);
