jQuery(document).ready(function(){var e=civi_map_box_single_vars.api_key,o=civi_map_box_single_vars.lng,a=civi_map_box_single_vars.lat,t=civi_map_box_single_vars.map_zoom,i=civi_map_box_single_vars.map_style,r=civi_map_box_single_vars.map_marker;var n=jQuery("#mapbox_map");if(n!=null){if(a!==""&&o!==""){mapboxgl.accessToken=e;var s=new mapboxgl.Map({container:"mapbox_map",style:"mapbox://styles/mapbox/"+i,zoom:t,center:[o,a]});s.addControl(new mapboxgl.NavigationControl);var p={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,a]},properties:{iconSize:[48,48],icon:r}}]};p.features.forEach(function(e,o){e.properties.id=o});s.on("load",function(e){s.addLayer({id:"locations",type:"symbol",source:{type:"geojson",data:p},layout:{"icon-image":"","icon-allow-overlap":true}});c()});if(!("remove"in Element.prototype)){Element.prototype.remove=function(){if(this.parentNode){this.parentNode.removeChild(this)}}}function c(){p.features.forEach(function(e){var o=document.createElement("div");o.id="marker-"+e.properties.id;o.className="marker";o.style.backgroundImage="url("+e.properties.icon+")";o.style.width=e.properties.iconSize[0]+"px";o.style.height=e.properties.iconSize[1]+"px";new mapboxgl.Marker(o,{offset:[0,-50/2]}).setLngLat(e.geometry.coordinates).addTo(s);o.addEventListener("click",function(e){var o=document.getElementsByClassName("active");e.stopPropagation();if(o[0]){o[0].classList.remove("active")}})})}}}});