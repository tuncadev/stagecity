(function(F){"use strict";F.fn.CiviGridLayout=function(){var k,L,i;function a(e){var i=window.innerWidth,t=L[0].getBoundingClientRect().width,n=1,o=0,a=0,r=k.data("grid"),s=r.gutter?r.gutter:0,d=r.gutterTablet?r.gutterTablet:s,g=r.gutterMobile?r.gutterMobile:d,l=r.columns?r.columns:1,f=r.columnsTablet?r.columnsTablet:l,u=r.columnsMobile?r.columnsMobile:f,c=r.zigzagHeight?r.zigzagHeight:0,p=r.zigzagHeightTablet?r.zigzagHeightTablet:c,m=r.zigzagHeightMobile?r.zigzagHeightMobile:p,h=r.zigzagReversed&&r.zigzagReversed===1?true:false;var y=1025;var v=768;if(typeof elementorFrontendConfig!=="undefined"){y=elementorFrontendConfig.breakpoints.lg;v=elementorFrontendConfig.breakpoints.md}if(i>=y){n=l;o=s;a=c}else if(i>=v){n=f;o=d;a=p}else{n=u;o=g;a=m}var z=(n-1)*o;var b=(t-z)/n;b=Math.floor(b);var w=b;if(n>1){w=b*2+o}L.children(".grid-sizer").css({width:b+"px"});var T=0,C=0,x=0,M=0,H=1,R=1;if(r.ratio){R=r.ratio}L.children(".grid-item").each(function(e){var i=F(this);if(a>0&&n>1&&e+1<=n){if(h===false){if(e%2===0){i.css({marginTop:a+"px"})}else{i.css({marginTop:"0px"})}}else{if(e%2!==0){i.css({marginTop:a+"px"})}else{i.css({marginTop:"0px"})}}}else{i.css({marginTop:"0px"})}if(i.data("width")===2){i.css({width:w+"px"})}else{i.css({width:b+"px"})}if("grid"===r.type){i.css({marginBottom:o+"px"})}});if(e){e.packery.gutter=o;e.fitRows.gutter=o;L.isotope(e)}L.isotope("layout")}function t(){var e=L.find(".grid-item");e.elementorWaypoint(function(){var e=this.element?this.element:this;var i=F(e);i.addClass("animate")},{offset:"90%",triggerOnce:true})}return this.each(function(){k=F(this);L=k.find(".civi-grid");var n=k.data("grid");var e;if(L.length>0&&n&&typeof n.type!=="undefined"){var o={itemSelector:".grid-item",percentPosition:true,transitionDuration:0,packery:{columnWidth:".grid-sizer"},fitRows:{gutter:10}};if("masonry"===n.type){o.layoutMode="packery"}else{o.layoutMode="fitRows"}e=L.imagesLoaded(function(){a(o);if("grid"===n.type){L.children(".grid-item").matchHeight();L.isotope("layout")}L.addClass("loaded")});e.one("arrangeComplete",function(){t()});F(window).resize(function(){a(o);clearTimeout(i);i=setTimeout(function(){a(o)},500)})}else{t()}k.on("CiviQueryEnd",function(e,i,t){if(L.length>0&&n&&typeof n.type!=="undefined"){L.isotope().append(t).isotope("reloadItems",t).imagesLoaded().always(function(){t.addClass("animate");a(o);if("grid"===n.type){L.children(".grid-item").matchHeight();L.isotope("layout")}})}else{L.append(t).imagesLoaded().always(function(){t.addClass("animate")})}})})}})(jQuery);